<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PROMPTFORGE L1 + Power-Up Integration Example</title>
    <style>
        :root {
            --neural-navy: #0F172A;
            --neural-spectrum-teal: #26E6C8;
            --neural-spectrum-orange: #FF8A00;
            --neural-spectrum-pink: #FF4FD8;
            --pure-white: #FFFFFF;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: var(--neural-navy);
            color: var(--pure-white);
            font-family: 'Inter', sans-serif;
            padding: 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
        }
        
        h1 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 28px;
            margin-bottom: 20px;
            color: var(--neural-spectrum-teal);
        }
        
        h2 {
            font-size: 20px;
            margin-top: 30px;
            margin-bottom: 15px;
            color: var(--neural-spectrum-orange);
            font-family: 'Space Grotesk', sans-serif;
        }
        
        .code-block {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(38, 230, 200, 0.2);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'JetBrains Mono', monospace;
            font-size: 13px;
            line-height: 1.6;
        }
        
        .section {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(38, 230, 200, 0.1);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .button-demo {
            display: inline-flex;
            gap: 12px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            font-family: 'Inter', monospace;
            transition: all 0.2s ease;
            text-decoration: none;
            display: inline-block;
        }
        
        .btn-teal {
            background: var(--neural-spectrum-teal);
            color: var(--neural-navy);
        }
        
        .btn-teal:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        .btn-orange {
            background: var(--neural-spectrum-orange);
            color: var(--pure-white);
        }
        
        .btn-orange:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        .integration-demo {
            background: linear-gradient(135deg, rgba(38, 230, 200, 0.1), rgba(255, 138, 0, 0.1));
            border: 2px solid var(--neural-spectrum-teal);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .quest-item {
            background: rgba(15, 23, 42, 0.5);
            border-left: 4px solid var(--neural-spectrum-teal);
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .quest-item h3 {
            margin-bottom: 10px;
            color: var(--neural-spectrum-orange);
        }
        
        .active-hud {
            background: rgba(38, 230, 200, 0.1);
            border: 1px solid var(--neural-spectrum-teal);
            border-radius: 6px;
            padding: 12px 16px;
            margin: 15px 0;
            font-family: 'JetBrains Mono', monospace;
            font-size: 13px;
        }
        
        .hud-item {
            display: inline-block;
            background: rgba(38, 230, 200, 0.2);
            padding: 4px 8px;
            border-radius: 4px;
            margin-right: 8px;
            margin-bottom: 8px;
        }
        
        .streak-nudge {
            background: linear-gradient(135deg, var(--neural-spectrum-orange), var(--neural-spectrum-pink));
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        
        .streak-nudge h3 {
            font-size: 20px;
            margin-bottom: 8px;
            font-family: 'Space Grotesk', sans-serif;
        }
        
        .streak-nudge p {
            margin-bottom: 15px;
            opacity: 0.95;
        }
        
        .checklist {
            background: rgba(255, 255, 255, 0.05);
            border-left: 4px solid var(--neural-spectrum-teal);
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        
        .checklist li {
            list-style: none;
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
        }
        
        .checklist li::before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: var(--neural-spectrum-teal);
            font-weight: bold;
        }
        
        .warning {
            background: rgba(255, 138, 0, 0.1);
            border: 1px solid var(--neural-spectrum-orange);
            border-radius: 6px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .warning strong {
            color: var(--neural-spectrum-orange);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Power-Up Integration Guide for Promptforge Levels</h1>
        
        <!-- Integration Point 1: Pre-Quest -->
        <div class="section">
            <h2>1Ô∏è‚É£ Integration Point: Pre-Quest Button</h2>
            <p>Add a power-up button before quest submission. Players can boost before attempting a quest.</p>
            
            <div class="integration-demo">
                <div class="quest-item">
                    <h3>‚ü≥ Quest 1: Signal Calibration</h3>
                    <p style="margin-bottom: 15px; font-size: 14px; color: #ccc;">Make the machine understand you precisely</p>
                    <div class="button-demo">
                        <button class="btn btn-teal">SUBMIT SIGNAL CALIBRATION</button>
                        <a href="promptforge-powerup.html?return=quest-1" class="btn btn-orange">‚ö° INSTALL POWER-UP</a>
                    </div>
                </div>
            </div>
            
            <p style="margin: 15px 0; color: #aaa;">Code to add (line ~267 in promptforge-l1.html):</p>
            <div class="code-block">
&lt;div class="flex gap-4 mb-4"&gt;
    &lt;button class="px-6 py-2 bg-neural-spectrum-teal..."&gt;
        SUBMIT SIGNAL CALIBRATION
    &lt;/button&gt;
    &lt;a href="promptforge-powerup.html?return=quest-1" 
       class="px-6 py-2 bg-neural-spectrum-orange..."&gt;
        ‚ö° INSTALL POWER-UP
    &lt;/a&gt;
&lt;/div&gt;</div>

            <p style="color: #aaa; font-size: 13px;">
                <strong>What it does:</strong> Opens promptforge-powerup.html with context. When user activates a power-up and returns, they come back to quest-1.
            </p>
        </div>

        <!-- Integration Point 2: Header HUD -->
        <div class="section">
            <h2>2Ô∏è‚É£ Integration Point: Active Power-Ups HUD (Header)</h2>
            <p>Show currently active power-ups in the page header. Appears on desktop only, hidden on mobile.</p>
            
            <div class="integration-demo">
                <div style="background: rgba(15, 23, 42, 0.5); padding: 15px; border-radius: 6px; margin-bottom: 15px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <div>
                            <span style="font-family: 'Space Grotesk'; font-size: 18px; font-weight: bold;">L1 ‚Äî SIGNAL ROOKIE</span>
                        </div>
                        <div class="active-hud">
                            <strong style="color: #aaa; font-size: 11px;">ACTIVE:</strong>
                            <div class="hud-item">‚ö° Focus (18:42)</div>
                            <div class="hud-item">üß† Memory (25:30)</div>
                            <a href="promptforge-powerup.html?return=header" style="color: var(--neural-spectrum-orange); text-decoration: none; font-weight: bold; font-size: 12px;">[Manage]</a>
                        </div>
                    </div>
                </div>
            </div>

            <p style="margin: 15px 0; color: #aaa;">Code to add (in header, around line 167-180):</p>
            <div class="code-block">
&lt;!-- Active Power-Ups HUD (hidden on mobile) --&gt;
&lt;div class="hidden md:flex items-center gap-3 px-4 py-2 
    bg-neural-navy/50 rounded-lg border border-neural-spectrum-orange/30"&gt;
    &lt;span class="text-xs font-mono text-white/60"&gt;ACTIVE:&lt;/span&gt;
    &lt;div id="activeHUD" class="flex gap-2"&gt;
        &lt;!-- Populated by JavaScript --&gt;
    &lt;/div&gt;
    &lt;a href="promptforge-powerup.html?return=header" 
       class="text-xs text-neural-spectrum-orange hover:text-orange-300 font-bold"&gt;
        [Manage]
    &lt;/a&gt;
&lt;/div&gt;</div>

            <p style="margin: 15px 0; color: #aaa;">JavaScript to add (in script section):</p>
            <div class="code-block">
// Load active power-ups from localStorage
function updateActivePowerUpsHUD() {
    const activePowers = JSON.parse(
        localStorage.getItem('activePowers') || '[]'
    );
    const hudContainer = document.getElementById('activeHUD');
    
    if (activePowers.length === 0) {
        hudContainer.innerHTML = 
            '&lt;span class="text-xs text-white/50"&gt;None&lt;/span&gt;';
        return;
    }
    
    const now = Date.now();
    const stillActive = activePowers.map(power => {
        const elapsed = now - power.startTime;
        const remaining = Math.max(
            0, 
            power.duration - elapsed
        );
        const minutes = Math.ceil(remaining / 60000);
        
        return `
            &lt;div class="flex items-center gap-1 px-2 py-1 
                bg-neural-spectrum-orange/20 rounded text-xs 
                font-mono text-neural-spectrum-orange"&gt;
                &lt;span&gt;${power.icon}&lt;/span&gt;
                &lt;span&gt;${minutes}m&lt;/span&gt;
            &lt;/div&gt;
        `;
    }).join('');
    
    hudContainer.innerHTML = stillActive;
}

// Update every second
setInterval(updateActivePowerUpsHUD, 1000);
updateActivePowerUpsHUD();</div>
        </div>

        <!-- Integration Point 3: Post-Quest Streak Nudge -->
        <div class="section">
            <h2>3Ô∏è‚É£ Integration Point: Post-Quest Streak Nudge</h2>
            <p>After quest completion, show a streak protection reminder to encourage power-up installation.</p>
            
            <div class="streak-nudge">
                <div style="font-size: 28px; margin-bottom: 12px;">‚ö°</div>
                <h3>Power-Up Available</h3>
                <p>Install a boost to protect your 7-day streak and amplify your next quest.</p>
                <a href="promptforge-powerup.html?return=quest-2" class="btn" style="background: white; color: var(--neural-spectrum-orange); margin-top: 10px;">
                    OPEN POWER-UPS ‚Üí
                </a>
            </div>

            <p style="margin: 15px 0; color: #aaa;">Code to add (after XP celebration, around line 415):</p>
            <div class="code-block">
&lt;!-- Streak Nudge (appears after quest complete) --&gt;
&lt;div id="streakNudge" class="mt-8 p-6 rounded-lg text-center"
    style="
        background: linear-gradient(135deg, #FF8A00, #FF4FD8);
        color: white;
        display: none;
    "&gt;
    &lt;div style="font-size: 28px; margin-bottom: 12px;"&gt;‚ö°&lt;/div&gt;
    &lt;h4 style="font-weight: bold; margin-bottom: 8px; 
        font-family: 'Space Grotesk';"&gt;
        Power-Up Available
    &lt;/h4&gt;
    &lt;p style="font-size: 14px; margin-bottom: 12px; opacity: 0.95;"&gt;
        Install a boost to protect your 7-day streak and 
        amplify your next quest.
    &lt;/p&gt;
    &lt;a href="promptforge-powerup.html?return=quest-2" 
       class="inline-block px-6 py-2 bg-white text-orange-600 
       font-bold rounded hover:bg-gray-100 transition"&gt;
        OPEN POWER-UPS ‚Üí
    &lt;/a&gt;
&lt;/div&gt;</div>

            <p style="margin: 15px 0; color: #aaa;">JavaScript to show nudge after quest submit (in handler):</p>
            <div class="code-block">
// Call this after XP animation completes
function onQuestComplete(questNumber) {
    // Show XP animation first
    showXPAnimation(100);
    
    // Determine next quest for return parameter
    const nextQuest = questNumber + 1;
    const returnParam = `quest-${nextQuest}`;
    
    // Update href on nudge button
    const nudgeButton = document.querySelector('#streakNudge a');
    nudgeButton.href = 
        `promptforge-powerup.html?return=${returnParam}`;
    
    // Show nudge after 2 seconds
    setTimeout(() => {
        const nudge = document.getElementById('streakNudge');
        nudge.style.display = 'block';
        nudge.style.animation = 'slideInUp 0.4s ease';
    }, 2000);
}

// Add CSS animation
const style = document.createElement('style');
style.textContent = `
    @keyframes slideInUp {
        from {
            transform: translateY(40px);
            opacity: 0;
        }
        to {
            transform: translateY(0);
            opacity: 1;
        }
    }
`;
document.head.appendChild(style);</div>
        </div>

        <!-- Return Navigation -->
        <div class="section">
            <h2>üîÑ Return Navigation</h2>
            <p>When player closes power-up page, they should return to the quest they came from.</p>
            
            <div class="code-block">
// In promptforge-powerup.html JavaScript
const urlParams = new URLSearchParams(window.location.search);
const returnPath = urlParams.get('return');

function goBack() {
    if (returnPath === 'quest-1') {
        // Scroll to quest 1
        window.location.href = 'promptforge-l1.html#quest-1';
    } else if (returnPath === 'quest-2') {
        window.location.href = 'promptforge-l1.html#quest-2';
    } else if (returnPath === 'miniboss') {
        window.location.href = 'promptforge-l1.html#miniboss';
    } else if (returnPath === 'finalboss') {
        window.location.href = 'promptforge-l1.html#finalboss';
    } else if (returnPath === 'header') {
        // Stay on page
        window.history.back();
    } else {
        window.history.back();
    }
}</div>
        </div>

        <!-- Implementation Checklist -->
        <div class="section">
            <h2>‚úÖ Implementation Checklist</h2>
            <ul class="checklist">
                <li>Add "‚ö° INSTALL POWER-UP" button before each quest submit button</li>
                <li>Link buttons to: <code style="background: rgba(0,0,0,0.3); padding: 2px 6px;">promptforge-powerup.html?return=quest-X</code></li>
                <li>Add Active Power-Ups HUD to header (hidden on mobile with <code style="background: rgba(0,0,0,0.3); padding: 2px 6px;">hidden md:flex</code>)</li>
                <li>Add JavaScript to update HUD every 1 second</li>
                <li>Add streak nudge div after quest section</li>
                <li>Add onQuestComplete() handler to show nudge at 2s delay</li>
                <li>Update return parameter based on next quest number</li>
                <li>Test return navigation: return param ‚Üí correct quest anchor</li>
                <li>Test mobile: no HUD on small screens, buttons visible on all sizes</li>
                <li>Test localStorage persistence: power-ups remain after page refresh</li>
            </ul>
        </div>

        <!-- URLs Reference -->
        <div class="section">
            <h2>üìç URL Reference</h2>
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="border-bottom: 2px solid var(--neural-spectrum-teal);">
                        <th style="text-align: left; padding: 12px; color: var(--neural-spectrum-teal);">Scenario</th>
                        <th style="text-align: left; padding: 12px; color: var(--neural-spectrum-teal);">URL</th>
                        <th style="text-align: left; padding: 12px; color: var(--neural-spectrum-teal);">Return To</th>
                    </tr>
                </thead>
                <tbody>
                    <tr style="border-bottom: 1px solid rgba(38, 230, 200, 0.1);">
                        <td style="padding: 12px;">Pre-Quest 1</td>
                        <td style="padding: 12px; font-family: monospace; font-size: 12px;">promptforge-powerup.html?return=quest-1</td>
                        <td style="padding: 12px;">#quest-1 anchor</td>
                    </tr>
                    <tr style="border-bottom: 1px solid rgba(38, 230, 200, 0.1);">
                        <td style="padding: 12px;">Pre-Mini-Boss</td>
                        <td style="padding: 12px; font-family: monospace; font-size: 12px;">promptforge-powerup.html?return=miniboss</td>
                        <td style="padding: 12px;">#miniboss anchor</td>
                    </tr>
                    <tr style="border-bottom: 1px solid rgba(38, 230, 200, 0.1);">
                        <td style="padding: 12px;">Pre-Final Boss</td>
                        <td style="padding: 12px; font-family: monospace; font-size: 12px;">promptforge-powerup.html?return=finalboss</td>
                        <td style="padding: 12px;">#finalboss anchor</td>
                    </tr>
                    <tr style="border-bottom: 1px solid rgba(38, 230, 200, 0.1);">
                        <td style="padding: 12px;">From Header Manage</td>
                        <td style="padding: 12px; font-family: monospace; font-size: 12px;">promptforge-powerup.html?return=header</td>
                        <td style="padding: 12px;">Same page (history.back)</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px;">Direct Link</td>
                        <td style="padding: 12px; font-family: monospace; font-size: 12px;">promptforge-powerup.html</td>
                        <td style="padding: 12px;">Previous page (history)</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Flow Diagram -->
        <div class="section">
            <h2>üìä User Flow</h2>
            <div class="code-block" style="text-align: left;">
Level Page (promptforge-l1.html)
    ‚îÇ
    ‚îú‚îÄ BEFORE QUEST START
    ‚îÇ   ‚îî‚îÄ User clicks "‚ö° INSTALL POWER-UP"
    ‚îÇ       ‚îî‚îÄ Opens: promptforge-powerup.html?return=quest-1
    ‚îÇ
    ‚îú‚îÄ DURING QUEST
    ‚îÇ   ‚îî‚îÄ Header HUD shows: ‚ö° Focus (18:42) [Manage]
    ‚îÇ       ‚îî‚îÄ Click [Manage] ‚Üí promptforge-powerup.html?return=header
    ‚îÇ
    ‚îî‚îÄ AFTER QUEST SUBMIT
        ‚îú‚îÄ XP Animation (0-2s)
        ‚îî‚îÄ Streak Nudge appears (2s+)
            ‚îî‚îÄ User clicks "OPEN POWER-UPS"
                ‚îî‚îÄ Opens: promptforge-powerup.html?return=quest-2
            </div>
        </div>

        <!-- Important Notes -->
        <div class="warning">
            <strong>‚ö†Ô∏è Important Notes:</strong>
            <ul style="margin-top: 10px; padding-left: 20px;">
                <li>Add <code style="background: rgba(0,0,0,0.3); padding: 2px 6px;">id="quest-1"</code>, <code style="background: rgba(0,0,0,0.3); padding: 2px 6px;">id="miniboss"</code>, <code style="background: rgba(0,0,0,0.3); padding: 2px 6px;">id="finalboss"</code> anchors to quest sections for proper return navigation</li>
                <li>Power-ups use localStorage, so they persist across page navigation</li>
                <li>HUD updates every second, so expired powers fade automatically</li>
                <li>Mobile: Hide HUD with Tailwind class <code style="background: rgba(0,0,0,0.3); padding: 2px 6px;">hidden md:flex</code></li>
                <li>Test all three integration points before deploying</li>
            </ul>
        </div>
    </div>
</body>
</html>
